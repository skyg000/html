<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeFun</title>
</head>
<body>
    <article class="interval">
        <h2>setInterval() / clearInterval()</h2>
        <div>
            <p>100%</p>
        </div>
    </article>
    <style>
        article{
            width: 500px ;
            margin: 100px auto;
        }
        .interval p{
            background-color: red;
            text-align: right;
            color: beige;
            width: 0; /* 미리설정해줘서 새로고침 시 화면에 출력 안되게 됨 */
        }
    </style>
    <script>
        const elInter = document.querySelector('.interval p');

                let num = 0;

                let interval=setInterval(function(){ /* 다른 명령도 적용되기 때문에 변수를 지정해야 전체 적용이 안됨 */
                    if(num < 100){
                    num++;
                    elInter.style=`width:${num}%`;
                    elInter.innerText=`${num}%`;
                    }else{
                        clearInterval(interval);

                    }
                },100);
    
    </script>

    <article class="slide">
        <h2>ex)interval</h2>
        <div>
            <figure>
                <img src="../img/01.jpg" >
                <img src="../img/09.jpg" >
                <img src="../img/10.jpg" >
            </figure>
            <p>
                <button data-name="prev" >prev</button> <!-- data- =사용자 속성 | class를 지정하여사용도 가능 -->
                <button data-name="next">next</button>
                <button data-name="toggle">pause</button>
            </p>
        </div>
        <style>
            figure{
                margin: 0;
                display: flex;
                transition: 0.5s;
            }
            .slide img{
                width: 100%;
            }
            .slide > div{
                overflow: hidden;
            }
        </style>
    </article>
    <script>
        const elSlideBtn =document.querySelectorAll('.slide button'),
                elSlide = document.querySelector('.slide figure');
        let sNum = 0;
            elSlideBtn.forEach(function(btn){
                btn.onclick = function(){
                    let name = this.dataset.name; 
                    if(name === 'toggle'){ 
                        /* 슬라이드 정지/플레이 설정하기 */
                        if(this.innerText === 'pause'){
                            this.innerText ='play'
                            clearInterval(slideInterval)
                        }else{
                            this.innerText='pause'
                            loop();
                        }
                    }else{
                        slidePlay(name);
                    }
                }
            })
            
            let slidePlay = function(param){
                if(param === 'next'){
                    if(sNum < 2){sNum++;}
                }else{
                    if(sNum > 0){sNum--;}
                }
                elSlide.style = `transform:translateX(${-100 * sNum}%)`;
            }

            let slideInterval;
            function loop(){
                slideInterval = setInterval(slidePlay,2000,'next')
            }
            loop();

        /* 슬라이드 플레이 정지시키기 */
            /*  elSlideBtn.forEach(function(btn){
                btn.onclick = function(){
                    let name = this.dataset.name; 
                    if(name === 'toggle'){
                        clearInterval(slideInterval) 
                    }else{
                    slidePlay(name); this.dataset.nameclassName 아이콘으로 사용할 경우 태그에 클래스를 지정해주고 className를 입력해주면 됨 | dataset=배열방식
                    }
                }
            }) */

        /*  elSlide.onclick =function(){
            clearInterval(slideInterval);
        } */

        /* slideInterval =setInterval(function(){ 
                slidePlay('next')
        },2000) */
        
        
        /* else{sNum=0;} */
        /* if(sNum == 2){
            const first = document.querySelector('.slide img:first-child');
            elSlide.append(first.cloneNode()); /* append=추가하는 명령어 | cloneNode() 복제해주는 명령어*/ 
        /* elSlideBtn[1].onclick =function(){
        slidePlay('next');
        }
        elSlideBtn[0].onclick =function(){
        slidePlay('prev');
        } */
    </script>
    
    <script>
        console.log(
            Math.random()
        );
    </script>
</body>
</html>